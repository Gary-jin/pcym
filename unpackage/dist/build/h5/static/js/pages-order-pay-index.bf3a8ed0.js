(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-pay-index"],{"020b":function(a,e,t){"use strict";var r;t.d(e,"b",(function(){return i})),t.d(e,"c",(function(){return o})),t.d(e,"a",(function(){return r}));var i=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("v-uni-view",{staticClass:"header-wrapper"},[t("v-uni-view",{staticClass:"wrap"},[t("logo"),t("v-uni-view",{staticClass:"title"},[a._v(a._s(a.title))]),a.tips?t("v-uni-view",{staticClass:"tips"},[a._v(a._s(a.tips))]):a._e(),t("v-uni-view",{staticClass:"top-navbar"},[a.hasLogin?[t("user-navs",{attrs:{isWhiteBack:!0}})]:[t("v-uni-navigator",{staticClass:"nav-item",attrs:{url:"/pages/user/login/index?callbackUrl="+a.callbackUrl}},[a._v("登录")]),t("v-uni-view",{staticClass:"separator"},[a._v("|")]),t("v-uni-navigator",{staticClass:"nav-item",attrs:{url:"/pages/user/register/index?callbackUrl="+a.callbackUrl}},[a._v("注册")])]],2)],1)],1)},o=[]},"07a7":function(a,e,t){var r=t("e4ea");"string"===typeof r&&(r=[[a.i,r,""]]),r.locals&&(a.exports=r.locals);var i=t("4f06").default;i("2b325b2a",r,!0,{sourceMap:!1,shadowMode:!1})},1029:function(a,e,t){"use strict";var r=t("ab21"),i=t.n(r);i.a},3033:function(a,e,t){"use strict";(function(a){var r=t("4ea4");t("99af"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(t("b59c")),o={components:{miniHeader:i.default},data:function(){return{timeRemaining:"",order:{},showDetails:!1,qrcodeUrl:"",payMode:0,hiddenQrcode:!0}},onLoad:function(a){a.orderNo?this.findBaseDetails(a.orderNo):uni.redirectTo({url:"/pages/index"})},onHide:function(){clearInterval(this.timer)},methods:{findBaseDetails:function(a){var e=this;uni.showLoading({title:"加载中...",mask:!0}),this.$util.request("/order/pay/details",{orderNo:a},(function(a){uni.hideLoading(),"ok"==a.state?(e.order=a.order,e.startCountdown(a.order.createTime)):e.$alert(a.msg,{showCancel:!1},(function(){uni.redirectTo({url:"/pages/index"})}))}),!0)},startCountdown:function(a){var e=this;this.timer=setInterval((function(){var t=new Date,r=new Date(a);r.setMinutes(r.getMinutes()+30);var i=e.$util.timeDiff(t,r);i?e.timeRemaining="".concat(i[1],"分").concat(i[2],"秒"):(clearInterval(e.timer),uni.redirectTo({url:"/pages/order/detail?orderNo=".concat(e.order.orderNo)}))}),1e3)},requestPayment:function(a){var e=this;uni.showLoading({title:"请求中...",mask:!0}),this.$util.request("/order/pay",{orderNo:this.order.orderNo,payMode:a},(function(t){uni.hideLoading(),"ok"==t.state?(e.qrcodeUrl=encodeURIComponent(t.url),e.payMode=a,e.hiddenQrcode=!1,e.waitSuccess()):e.$alert(t.msg,{showCancel:!1})}))},waitSuccess:function(){var e=this;this.wsTask=uni.connectSocket({url:"".concat(this.$util.wsUrl,"/pay/status.ws/").concat(this.order.orderNo),complete:function(){}}),this.wsTask.onOpen((function(){e.wsTask.onMessage((function(t){try{t=JSON.parse(t.data),"ok"==t.state&&(e.cancelPayment(),uni.navigateTo({url:"/pages/order/pay/pay-success?orderNo=".concat(e.order.orderNo)}))}catch(r){a.error(r)}}))}))},cancelPayment:function(){this.hiddenQrcode=!0;try{this.wsTask.close()}catch(e){a.error(e)}}}};e.default=o}).call(this,t("5a52")["default"])},"371c":function(a,e,t){var r=t("24fb");e=r(!1),e.push([a.i,'@charset "UTF-8";\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 页面宽度 */.order-wrapper .wrap .top .order-info[data-v-4e584ae4], .order-wrapper .wrap .bottom .bottom-wrap .detail-item[data-v-4e584ae4]{display:flex;align-items:center}.order-wrapper[data-v-4e584ae4]{background-color:#f5f5f5;padding-top:38px;padding-bottom:30px}.order-wrapper .wrap[data-v-4e584ae4]{background-color:#fff;width:1226px;margin:0 auto}.order-wrapper .wrap .top[data-v-4e584ae4]{display:flex;padding:38px}.order-wrapper .wrap .top .i-success[data-v-4e584ae4]{font-size:100px;color:#83c44e;margin-right:48px}.order-wrapper .wrap .top .order-info[data-v-4e584ae4]{flex:1;justify-content:space-between}.order-wrapper .wrap .top .order-info .left .title[data-v-4e584ae4]{margin-bottom:10px;font-size:24px;line-height:36px}.order-wrapper .wrap .top .order-info .left .info-item[data-v-4e584ae4]{color:#616161;margin-bottom:5px;line-height:2}.order-wrapper .wrap .top .order-info .left .info-item .duration[data-v-4e584ae4]{margin:0 5px;color:#ff6700}.order-wrapper .wrap .top .order-info .left .info-item.address[data-v-4e584ae4]{max-width:600px}.order-wrapper .wrap .top .order-info .left .info-item.address uni-text[data-v-4e584ae4]{margin-right:10px}.order-wrapper .wrap .top .order-info .left .info-item.address.hide[data-v-4e584ae4]{-webkit-animation:hide-data-v-4e584ae4 .3s forwards;animation:hide-data-v-4e584ae4 .3s forwards}@-webkit-keyframes hide-data-v-4e584ae4{from{opacity:1}to{opacity:0}}@keyframes hide-data-v-4e584ae4{from{opacity:1}to{opacity:0}}.order-wrapper .wrap .top .order-info .right[data-v-4e584ae4]{text-align:right}.order-wrapper .wrap .top .order-info .right .pay-amount[data-v-4e584ae4]{margin-bottom:20px;color:#757575}.order-wrapper .wrap .top .order-info .right .pay-amount .amount[data-v-4e584ae4]{font-size:24px;color:#ff6700}.order-wrapper .wrap .top .order-info .right .pay-amount .unit[data-v-4e584ae4]{color:#ff6700}.order-wrapper .wrap .top .order-info .right .btn-detail[data-v-4e584ae4]{cursor:pointer;color:#757575}.order-wrapper .wrap .top .order-info .right .btn-detail .icon[data-v-4e584ae4]{margin-left:5px;font-size:12px;font-weight:700;display:inline-block;-webkit-transform:rotate(90deg);transform:rotate(90deg);transition:all .3s}.order-wrapper .wrap .top .order-info .right .btn-detail[data-v-4e584ae4]:hover{color:#ff6700}.order-wrapper .wrap .top .order-info .right .btn-detail.active .icon[data-v-4e584ae4]{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.order-wrapper .wrap .bottom[data-v-4e584ae4]{height:0;overflow:hidden;transition:height .6s}.order-wrapper .wrap .bottom.active[data-v-4e584ae4]{height:150px}.order-wrapper .wrap .bottom .bottom-wrap[data-v-4e584ae4]{padding:30px 0;border-top:1px solid #e0e0e0;margin-top:10px;margin-left:185px;margin-right:38px}.order-wrapper .wrap .bottom .bottom-wrap .detail-item[data-v-4e584ae4]{line-height:2;color:#333}.order-wrapper .wrap .bottom .bottom-wrap .detail-item .name[data-v-4e584ae4]{width:85px}.order-wrapper .wrap .bottom .bottom-wrap .detail-item .value[data-v-4e584ae4]{max-width:900px}.order-wrapper .wrap .bottom .bottom-wrap .detail-item .value.orderno[data-v-4e584ae4]{color:#ff6700}.order-wrapper .wrap .bottom .bottom-wrap .detail-item .value uni-text[data-v-4e584ae4]{margin-right:10px}.payment-wrapper[data-v-4e584ae4]{background-color:#f5f5f5;padding-bottom:38px}.payment-wrapper .wrap[data-v-4e584ae4]{width:1226px;margin:0 auto;background-color:#fff}.payment-wrapper .wrap .tip[data-v-4e584ae4]{color:#424242;padding:30px 0;margin:0 48px;border-bottom:1px solid #e0e0e0;font-size:18px}.payment-wrapper .wrap .pay-platform[data-v-4e584ae4]{padding:30px 48px}.payment-wrapper .wrap .pay-platform .title[data-v-4e584ae4]{font-size:16px;font-weight:700;color:#616161;margin-bottom:20px}.payment-wrapper .wrap .pay-platform .platform[data-v-4e584ae4]{width:174px;height:60px;cursor:pointer;margin-right:14px;border:1px solid #e0e0e0;transition:border-color .3s}.payment-wrapper .wrap .pay-platform .platform[data-v-4e584ae4]:hover{border-color:#ff6700}.qrcode-wrapper[data-v-4e584ae4]{width:100%}.qrcode-wrapper .qrcode-wrap[data-v-4e584ae4]{width:290px;height:290px;position:relative;margin:30px auto 10px}.qrcode-wrapper .qrcode-wrap .qrcode[data-v-4e584ae4]{width:100%;height:100%}.qrcode-wrapper .qrcode-wrap .logo-wrap[data-v-4e584ae4]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:45px;height:45px;background-color:#fff;padding:3px;border-radius:10px;box-shadow:0 0 5px #fff}.qrcode-wrapper .qrcode-wrap .logo-wrap .logo[data-v-4e584ae4]{width:100%;height:100%}.qrcode-wrapper .tips[data-v-4e584ae4]{margin-bottom:10px;color:#333;text-align:center}.qrcode-wrapper .tips .platform[data-v-4e584ae4]{color:#ff6700;margin:0 5px}',""]),a.exports=e},"5cb2":function(a,e,t){"use strict";t.r(e);var r=t("c688"),i=t.n(r);for(var o in r)"default"!==o&&function(a){t.d(e,a,(function(){return r[a]}))}(o);e["default"]=i.a},9413:function(a,e,t){"use strict";var r=t("07a7"),i=t.n(r);i.a},9761:function(a,e,t){"use strict";t.r(e);var r=t("d287"),i=t("b71c");for(var o in i)"default"!==o&&function(a){t.d(e,a,(function(){return i[a]}))}(o);t("1029");var n,s=t("f0c5"),p=Object(s["a"])(i["default"],r["b"],r["c"],!1,null,"4e584ae4",null,!1,r["a"],n);e["default"]=p.exports},ab21:function(a,e,t){var r=t("371c");"string"===typeof r&&(r=[[a.i,r,""]]),r.locals&&(a.exports=r.locals);var i=t("4f06").default;i("187ec4dc",r,!0,{sourceMap:!1,shadowMode:!1})},b59c:function(a,e,t){"use strict";t.r(e);var r=t("020b"),i=t("5cb2");for(var o in i)"default"!==o&&function(a){t.d(e,a,(function(){return i[a]}))}(o);t("9413");var n,s=t("f0c5"),p=Object(s["a"])(i["default"],r["b"],r["c"],!1,null,"f6a4cd74",null,!1,r["a"],n);e["default"]=p.exports},b71c:function(a,e,t){"use strict";t.r(e);var r=t("3033"),i=t.n(r);for(var o in r)"default"!==o&&function(a){t.d(e,a,(function(){return r[a]}))}(o);e["default"]=i.a},c688:function(a,e,t){"use strict";var r=t("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(t("5530")),o=r(t("91c2")),n=r(t("fd24")),s=t("26cb"),p={components:{logo:o.default,userNavs:n.default},props:{title:String,tips:String,mustLogin:{type:Boolean,default:!0},callbackUrl:{type:String,default:"/pages/cart/index"}},computed:(0,i.default)({},(0,s.mapGetters)(["hasLogin"])),created:function(){this.mustLogin&&!this.hasLogin&&uni.redirectTo({url:"/pages/index"})}};e.default=p},d287:function(a,e,t){"use strict";var r;t.d(e,"b",(function(){return i})),t.d(e,"c",(function(){return o})),t.d(e,"a",(function(){return r}));var i=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("v-uni-view",[t("mini-header",{attrs:{title:"支付订单"}}),t("v-uni-view",{staticClass:"order-wrapper"},[t("v-uni-view",{staticClass:"wrap"},[t("v-uni-view",{staticClass:"top"},[t("i",{staticClass:"icon i-success"}),t("v-uni-view",{staticClass:"order-info"},[t("v-uni-view",{staticClass:"left"},[t("v-uni-view",{staticClass:"title"},[a._v("订单提交成功！去付款咯～")]),t("v-uni-view",{staticClass:"info-item"},[t("v-uni-text",[a._v("请在")]),t("v-uni-text",{staticClass:"duration"},[a._v(a._s(a.timeRemaining))]),t("v-uni-text",[a._v("内完成支付, 超时后将自动取消订单")])],1),t("v-uni-view",{staticClass:"info-item address elip",class:{hide:a.showDetails}},[t("v-uni-text",[a._v("收货信息：")]),t("v-uni-text",[a._v(a._s(a.order.consignee))]),t("v-uni-text",[a._v(a._s(a.order.phone))]),t("v-uni-text",[a._v(a._s(a.order.province)+" "+a._s(a.order.city)+" "+a._s(a.order.district)+" "+a._s(a.order.address))])],1)],1),t("v-uni-view",{staticClass:"right"},[t("v-uni-view",{staticClass:"pay-amount"},[t("v-uni-text",[a._v("应付金额：")]),t("v-uni-text",{staticClass:"amount"},[a._v(a._s(a.order.payAmount))]),t("v-uni-text",{staticClass:"unit"},[a._v("元")])],1),t("v-uni-view",{class:["btn-detail",{active:a.showDetails}],on:{click:function(e){arguments[0]=e=a.$handleEvent(e),a.showDetails=!a.showDetails}}},[t("v-uni-text",[a._v("订单详情")]),t("i",{staticClass:"icon i-right"})],1)],1)],1)],1),t("v-uni-view",{class:["bottom",{active:a.showDetails}]},[t("v-uni-view",{staticClass:"bottom-wrap"},[t("v-uni-view",{staticClass:"detail-item"},[t("v-uni-view",{staticClass:"name"},[a._v("订单号码：")]),t("v-uni-view",{staticClass:"value orderno"},[a._v(a._s(a.order.orderNo))])],1),t("v-uni-view",{staticClass:"detail-item"},[t("v-uni-view",{staticClass:"name"},[a._v("收货信息：")]),t("v-uni-view",{staticClass:"value"},[t("v-uni-text",[a._v(a._s(a.order.consignee))]),t("v-uni-text",[a._v(a._s(a.order.phone))]),t("v-uni-text",[a._v(a._s(a.order.province)+" "+a._s(a.order.city)+" "+a._s(a.order.district)+" "+a._s(a.order.address))])],1)],1),t("v-uni-view",{staticClass:"detail-item"},[t("v-uni-view",{staticClass:"name"},[a._v("商品名称：")]),t("v-uni-view",{staticClass:"value elip"},[a._v(a._s(a.order.goodsList))])],1)],1)],1)],1)],1),t("v-uni-view",{staticClass:"payment-wrapper"},[t("v-uni-view",{staticClass:"wrap"},[t("v-uni-view",{staticClass:"tip"},[a._v("选择以下支付方式付款")]),t("v-uni-view",{staticClass:"pay-platform"},[t("v-uni-view",{staticClass:"title"},[a._v("支付平台")]),t("v-uni-view",{staticClass:"platform-wrap"},[t("v-uni-image",{staticClass:"platform",attrs:{src:"/static/image/pay/alipay.png",mode:"aspectFit"},on:{click:function(e){arguments[0]=e=a.$handleEvent(e),a.requestPayment(0)}}}),t("v-uni-image",{staticClass:"platform",attrs:{src:"/static/image/pay/wechatpay.png",mode:"aspectFit"},on:{click:function(e){arguments[0]=e=a.$handleEvent(e),a.requestPayment(1)}}})],1)],1)],1)],1),t("zw-dialog",{attrs:{hidden:a.hiddenQrcode,title:0==a.payMode?"支付宝支付":"微信支付",width:370,height:400},on:{close:function(e){arguments[0]=e=a.$handleEvent(e),a.cancelPayment.apply(void 0,arguments)}}},[t("v-uni-view",{staticClass:"qrcode-wrapper"},[t("v-uni-view",{staticClass:"qrcode-wrap"},[t("v-uni-image",{staticClass:"qrcode",attrs:{src:a.$util.baseUrl+"/order/pay/qrcode?content="+a.qrcodeUrl,mode:"aspectFit"}}),t("v-uni-view",{staticClass:"logo-wrap"},[t("v-uni-image",{staticClass:"logo",attrs:{src:"/static/image/pay/"+(0==a.payMode?"alipay-logo.png":"wechat-logo.png"),mode:"aspectFit"}})],1)],1),t("v-uni-view",{staticClass:"tips"},[t("v-uni-view",[a._v("请使用"),t("v-uni-text",{staticClass:"platform"},[a._v(a._s(0==a.payMode?"支付宝":"微信"))]),a._v("扫描")],1),t("v-uni-view",[a._v("二维码完成支付")])],1)],1)],1),t("zw-footer")],1)},o=[]},e4ea:function(a,e,t){var r=t("24fb");e=r(!1),e.push([a.i,'@charset "UTF-8";\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 页面宽度 */.header-wrapper .wrap[data-v-f6a4cd74], .header-wrapper .wrap .top-navbar[data-v-f6a4cd74]{display:flex;align-items:center}.header-wrapper[data-v-f6a4cd74]{height:100px;border-bottom:2px solid #ff6700}.header-wrapper .wrap[data-v-f6a4cd74]{width:1226px;height:100px;margin:0 auto}.header-wrapper .wrap .title[data-v-f6a4cd74]{font-size:28px;line-height:48px;color:#424242;margin-left:48px}.header-wrapper .wrap .tips[data-v-f6a4cd74]{height:20px;line-height:20px;margin-top:15px;margin-left:15px;color:#757575;font-size:12px}.header-wrapper .wrap .top-navbar[data-v-f6a4cd74]{margin-left:auto;color:#757575;font-size:12px}.header-wrapper .wrap .top-navbar .nav-item[data-v-f6a4cd74]{margin:0 5px;cursor:pointer;transition:color .2s}.header-wrapper .wrap .top-navbar .nav-item[data-v-f6a4cd74]:hover{color:#ff6700}.header-wrapper .wrap .top-navbar .separator[data-v-f6a4cd74]{color:#e0e0e0;line-height:40px}',""]),a.exports=e}}]);